<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">
        <title>Isoline Explorer - Powered by Leaflet & Geoapify</title>
        
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
        <link rel="stylesheet" href="https://js.arcgis.com/4.23/esri/themes/light/main.css">
        <!-- Load Esri Leaflet Geocoder from CDN -->
        <link rel="stylesheet" href="https://unpkg.com/esri-leaflet-geocoder@3.1.4/dist/esri-leaflet-geocoder.css">
        <link rel="stylesheet" href="./node_modules/layers_control_tree/L.Control.Layers.Tree.css">
        <link rel="stylesheet" href="https://unpkg.com/leaflet.fullscreen/dist/Control.FullScreen.css" />
        <link rel="stylesheet" type="text/css" href="./src/css/main.css" inline>
        
        <!-- Leaflet map -->
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
        <!-- Load proj4js for coordinate transformation -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.11.0/proj4.js"></script>
        <!-- Get active layers from layer control -->
        <script src="https://cdn.jsdelivr.net/npm/leaflet.active-layers@0.3.2/dist/leaflet.active-layers.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@turf/turf@7/turf.min.js"></script>
        <!-- Load external geoJSON file into Leaflet map -->
        <script src="./src/javascript/leaflet.ajax.js"></script>
        <!-- Convert shapefile to GeoJSON -->
        <script src="https://unpkg.com/shpjs@latest/dist/shp.js"></script>
        <!-- Turn layers control into collapsible tree -->
        <script src="./node_modules/layers_control_tree/L.Control.Layers.Tree.js"></script>
        <!-- Add fullscreen button to map -->
        <script src="https://unpkg.com/leaflet.fullscreen/dist/Control.FullScreen.umd.js"></script>
        <!-- JSZip reads ZIP files -->
        <script src="./jszip.min.js"></script>
        <!-- PapaParse is a CSV parser -->
        <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
        <script src="./src/javascript/main.js"></script>
</head>

<body>
  <div class="container">
    <div id="map">
      <div id="loader"></div>
    </div>
    <div class="sidebar">
      <h2>Isoline Explorer</h2>
      <p>Select the map filters to display key features</p>
      <p>Click on the map to create isoline polygons</p>
      <p>*Would like to show which Points of Interest and Stops are within reach when an isoline is created*</p>

      <h3 id="active-features" class="hide">Active Points of Interest</h3>
      <table id="table" class="hide">
        <tr>
          <th class="table-header">Name</th>
          <th class="table-header">Address</th>
          <th class="table-header">Category</th>
        </tr>
      </table>
      <button class="button clear-button" id="clear-all-button">Clear Isolines</button>
    </div>
  </div>

  <!-- Dialog for isoline configuration -->
  <div id="isoline-dialog" class="dialog-overlay hidden">
    <div class="dialog">
      <h3>Configure Isoline</h3>
      <form id="isoline-form">
        <div class="form-group">
          <label for="travel-mode">Travel Mode:</label>
          <select id="travel-mode" name="travel-mode" required>
            <option value="walk">Walk</option>
            <option value="hike">Hike</option>
            <option value="scooter">Scooter</option>
            <option value="motorcycle">Motorcycle</option>
            <option value="drive">Drive</option>
            <option value="truck">Truck</option>
            <option value="light_truck">Light Truck</option>
            <option value="medium_truck">Medium Truck</option>
            <option value="truck_dangerous_goods">Truck Dangerous Goods</option>
            <option value="heavy_truck">Heavy Truck</option>
            <option value="long_truck">Long Truck</option>
            <option value="bicycle">Bicycle</option>
            <option value="mountain_bike">Mountain Bike</option>
            <option value="road_bike">Road Bike</option>
            <option value="bus">Bus</option>
            <option value="drive_shortest">Drive Shortest</option>
            <option value="drive_traffic_approximated">Drive Traffic Approximated</option>
            <option value="truck_traffic_approximated">Truck Traffic Approximated</option>
            <option value="transit">Transit</option>
            <option value="approximated_transit">Approximated Transit</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="isoline-type">Isoline Type:</label>
          <select id="isoline-type" name="isoline-type" required>
            <option value="time">Time</option>
            <option value="distance">Distance</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="isoline-value">Value:</label>
          <input type="number" id="isoline-value" name="isoline-value" min="1" max="120" value="10" required>
          <span id="value-unit">minutes</span>
        </div>
        
        <div class="form-buttons">
          <button type="button" id="cancel-button">Cancel</button>
          <button type="submit" id="create-button">Create Isoline</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Loading indicator -->
  <div id="loading-indicator" class="loading-overlay hidden">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p>Loading isoline...</p>
    </div>
  </div>
</body>
</html> 